# 本地地址
    /Users/chuzhichao/Desktop/prometheus
# 监控报警三大套件
    prometheus Server 主要负责数据采集和存储，提供PromQL查询语言的支持。
    Alertmanager 警告管理器，用来进行报警。
    Push Gateway 支持临时性Job主动推送指标的中间网关。
# 详细教程
 https://www.cnblogs.com/chenqionghe/p/10494868.html     

# 下载地址--git地址
  https://prometheus.io/download/

# prometheus服务
    1：打开控制台，进入项目所在目录
    2：./prometheus --config.file=prometheus.yml
    3：确保关闭openresty相关，否则访问出问题
    默认地址 : 127.0.0.1:9090

# Node Exporter
    介绍 ： NodeExporter 是 Prometheus 提供的一个可以采集到主机信息的应用程序
    启动 ： ./node_exporter --web.listen-address 127.0.0.1:8080
    访问 :  127.0.0.1:8080  查看主机信息
    字段说明：
       node_boot_time：系统启动时间
        node_cpu：系统CPU使用量
        nodedisk*：磁盘IO
        nodefilesystem*：文件系统用量
        node_load1：系统负载
        nodememeory*：内存使用量
        nodenetwork*：网络带宽
        node_time：当前系统时间
        go_*：node exporter中go相关指标
        process_*：node exporter自身进程相关运行指标
        
    配置prometheus 的监控数据源 ： 
    prometheus.yml ： 
       scrape_configs:
          - job_name: 'prometheus'
            static_configs:
              - targets: ['localhost:9090']
          # 采集node exporter监控数据
          - job_name: 'node'
            static_configs:
              - targets: ['localhost:8080']
       查询 ： 
           http://127.0.0.1:9090/metrics  查看prometheus 监控详情
           http://127.0.0.1:8080/metrics  node 监控详情
           http://127.0.0.1:9090/graph 界面上通过关键字查询
       
# Push Gateway
    介绍 ： 
        pushgateway是为了允许临时作业和批处理作业向普罗米修斯公开他们的指标。
        由于这类作业的存在时间可能不够长, 无法抓取到, 因此它们可以将指标推送到推网关中。
        Prometheus采集数据是用的pull也就是拉模型，这从我们刚才设置的5秒参数就能看出来。但是有些数据并不适合采用这样的方式，对这样的数据可以使用Push Gateway服务。
        它就相当于一个缓存，当数据采集完成之后，就上传到这里，由Prometheus稍后再pull过来。
    推送：  echo "cqh_metric 100" | curl --data-binary @- 127.0.0.1:9091/metrics/job/cqh
    多字段推送：
                cat <<EOF | curl --data-binary @- 127.0.0.1:9091/metrics/job/cqh/instance/test
                muscle_metric{label="gym"} 8800
                bench_press 100
                dead_lift 160
                deep_squal 160
                EOF
    访问： http://localhost:9093/#/alerts
    然后配置prometheus ，关联起来

# 报警处理器 alertmanager
  
      访问： http://localhost:9093/#/alerts
    
      然后配置prometheus ，关联起来
      prometheus.yal:
            alerting:
              alertmanagers:
                - static_configs:
                    - targets: ["10.211.55.25:9093"]
      
      添加first_rules.yml: 配置报警规则
        groups:
          - name: cqh
            rules:
              - alert: cqh测试
                expr: dead_lift > 150
                for: 1m
                labels:
                  status: warning
                annotations:
                  summary: "{{$labels.instance}}:硬拉超标！lightweight baby!!!"
                  description: "{{$labels.instance}}:硬拉超标！lightweight baby!!!"
  
 
  
    